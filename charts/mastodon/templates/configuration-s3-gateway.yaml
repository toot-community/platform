apiVersion: v1
data:
  S3_BUCKET_NAME: {{ .Values.configuration.s3.bucket }}
  S3_SERVER: {{ .Values.configuration.s3.hostname }}
  S3_SERVER_PORT: "443"
  S3_SERVER_PROTO: {{ .Values.configuration.s3.protocol }}
  S3_REGION: {{ .Values.configuration.s3.region }}
  S3_STYLE: virtual-v2
  S3_SERVICE: s3
  DEBUG: "true"
  # AWS_SIGS_VERSION: "4"
  ALLOW_DIRECTORY_LIST: "false"
  PROVIDE_INDEX_PAGE: "false"
  APPEND_SLASH_FOR_POSSIBLE_DIRECTORY: "false"
  DIRECTORY_LISTING_PATH_PREFIX: ""
  PROXY_CACHE_MAX_SIZE: "10g"
  PROXY_CACHE_SLICE_SIZE: "1m"
  PROXY_CACHE_INACTIVE: "60m"
  PROXY_CACHE_VALID_OK: "1h"
  PROXY_CACHE_VALID_NOTFOUND: "1m"
  PROXY_CACHE_VALID_FORBIDDEN: "30s"
kind: ConfigMap
metadata:
  labels:
    {{- include "mastodon.labels" . | nindent 4 }}
  name: {{ include "mastodon.fullname" . }}-s3-gateway

